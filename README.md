# Photo Watermark 2 - 照片水印工具

一个功能强大的照片水印添加工具，支持批量处理、实时预览和多种水印样式。

## 功能完成情况

### 1. 文件处理 ✅ 已完成

#### 1.1 导入图片 ✅ 已完成
- ✅ 支持单张图片导入（通过文件选择器）
- ✅ 支持批量导入（一次性选择多张图片）
- ✅ 支持文件夹导入（自动扫描文件夹内所有图片）
- ✅ 界面显示已导入图片列表（文件名和索引）

#### 1.2 支持格式 ✅ 已完成
- ✅ **输入格式**：JPEG, PNG, BMP, TIFF
- ✅ **PNG透明通道**：完全支持PNG格式的透明通道
- ✅ **输出格式**：JPEG（默认），PNG（保持透明通道）
- ✅ **格式转换**：自动处理RGBA到RGB的转换

#### 1.3 导出图片 ✅ 已完成
- ✅ **输出文件夹选择**：用户可指定输出目录
- ✅ **防覆盖保护**：默认禁止导出到原文件夹
- ✅ **文件命名规则**：
  - ✅ 添加后缀（如 `_watermarked`）
  - ✅ 保留原文件名
- ✅ **JPEG质量调节**：0-100%压缩率滑块
- ❌ **图片尺寸调整**：暂未实现（可选高级功能）

### 2. 水印类型

#### 2.1 文本水印 ✅ 已完成
- ✅ **自定义文本**：支持任意文本输入
- ✅ **字体设置**：系统字体、字号调节（10-200px）
- ✅ **颜色选择**：调色板选择字体颜色
- ✅ **透明度调节**：0-100%透明度滑块
- ✅ **中文支持**：完美支持中文显示（无乱码）
- ❌ **字体样式**：粗体、斜体（可选高级功能）
- ❌ **阴影描边**：阴影或描边效果（可选高级功能）

#### 2.2 图片水印 ❌ 未实现
- ❌ **图片水印**：暂未实现（可选高级功能）
- ❌ **PNG透明支持**：暂未实现
- ❌ **缩放功能**：暂未实现
- ❌ **透明度调节**：暂未实现

### 3. 水印布局与样式

#### 3.1 实时预览 ✅ 已完成
- ✅ **实时预览**：所有调整立即显示效果
- ✅ **图片切换**：点击列表切换预览不同图片
- ✅ **高刷新率**：流畅的实时更新体验
- ✅ **独立配置**：每张图片独立保存水印设置

#### 3.2 位置 ✅ 已完成
- ✅ **九宫格布局**：左上、中上、右上、左中、居中、右中、左下、中下、右下
- ✅ **手动拖拽**：在预览图上直接拖拽调整位置
- ✅ **精确控制**：支持任意坐标位置
- ✅ **边界保护**：防止水印超出图片范围

#### 3.3 旋转 ✅ 已完成
- ✅ **任意角度旋转**：-180°到+180°滑块控制
- ✅ **中心旋转**：围绕文字中心旋转
- ✅ **实时预览**：旋转效果实时显示

### 4. 配置管理

#### 4.1 水印模板 ✅ 已完成
- ✅ **保存模板**：保存当前水印设置为模板
- ✅ **加载模板**：加载已保存的模板设置
- ✅ **管理模板**：删除不需要的模板
- ✅ **模板列表**：显示所有已保存的模板
- ✅ **双击应用**：双击模板名称快速应用
- ✅ **独立应用**：将模板应用到当前选中的图片
- ✅ **批量应用**：一键将模板应用到所有图片
- ✅ **自动保存**：模板自动保存到JSON文件
- ✅ **独立配置**：每张图片独立保存水印设置
- ❌ **自动加载**：暂未实现（程序启动时自动加载上次设置）

## 技术特性

### 已实现的高级功能
- ✅ **拖拽调整**：直观的鼠标拖拽操作
- ✅ **中文支持**：完美支持中文字体显示
- ✅ **实时预览**：所有操作立即生效
- ✅ **批量处理**：一次性处理多张图片
- ✅ **格式兼容**：支持主流图片格式
- ✅ **质量控制**：JPEG压缩质量可调
- ✅ **模板系统**：保存和加载水印模板
- ✅ **滚动界面**：左侧控制栏支持滚动操作
- ✅ **独立配置**：每张图片独立保存水印设置

### 界面设计
- ✅ **现代化UI**：使用tkinter构建的直观界面
- ✅ **响应式布局**：自适应窗口大小
- ✅ **操作提示**：清晰的功能说明和操作指引
- ✅ **状态显示**：实时显示处理进度和状态

## 安装和使用

### 系统要求
- Python 3.7+
- macOS 或 Windows
- 支持中文字体的系统

### 依赖安装
```bash
pip install -r requirements.txt
```

### 运行程序
```bash
python main.py
```

### 构建可执行文件
如果需要创建可执行文件进行分发，请查看 `build-tools/` 目录：

```bash
# 快速构建（推荐）
cd build-tools
python quick_build.py

# 完整构建
cd build-tools
python build.py
```

详细构建说明请参考 `build-tools/BUILD_GUIDE.md`。

### 使用步骤
1. **导入图片**：点击"导入图片"或"导入文件夹"
2. **设置水印**：输入文字、调整字体大小、选择颜色
3. **调整位置**：使用九宫格按钮或直接拖拽
4. **预览效果**：实时查看水印效果
5. **独立配置**：每张图片的水印设置自动独立保存
6. **模板管理**：保存常用设置为模板，支持独立或批量应用
7. **导出图片**：选择输出文件夹并导出（每张图片使用其独立设置）

## 文件结构
```
Photo-Watermark-2/
├── main.py              # 主程序文件
├── requirements.txt     # 依赖包列表
├── README.md           # 说明文档
├── templates.json      # 模板配置文件
├── 作业要求.md         # 作业要求文档
├── .gitignore          # Git忽略文件
└── build-tools/        # 构建工具目录
    ├── quick_build.py      # 快速构建脚本
    ├── build.py            # 完整构建脚本
    ├── create_installer.py # 安装包制作脚本
    ├── build.spec          # PyInstaller配置
    ├── BUILD_GUIDE.md      # 详细构建指南
    ├── RELEASE_README.md   # 发布说明
    ├── .github/workflows/  # GitHub Actions配置
    └── PhotoWatermark-v1.0.0-macos-arm64.zip # 已构建的发布包
```

## 开发进度

### 已完成功能 (98%)
- ✅ 基础文件处理
- ✅ 文本水印功能
- ✅ 位置调整系统
- ✅ 实时预览系统
- ✅ 批量导出功能
- ✅ 中文支持
- ✅ 拖拽操作
- ✅ 水印模板系统
- ✅ 滚动界面支持
- ✅ 每张图片独立配置

### 待实现功能 (2%)
- ❌ 图片水印功能
- ❌ 字体样式选项
- ❌ 图片尺寸调整
- ❌ 自动加载上次设置

## 版本信息
- **当前版本**：v2.0
- **最后更新**：2024年10月
- **开发状态**：主要功能已完成，持续优化中

## 核心特性说明

### 每张图片独立水印配置
- **自动保存**：每张图片的水印设置自动独立保存
- **无缝切换**：在不同图片间切换时保持各自的水印设置
- **灵活编辑**：可以为每张图片设置完全不同的水印样式
- **导出准确**：导出时每张图片使用其独立的水印配置

### 模板系统
- **独立应用**：将模板应用到当前选中的图片
- **批量应用**：将模板批量应用到所有图片（会覆盖独立设置）
- **智能提示**：批量应用时会提示将覆盖独立设置
- **快速切换**：双击模板名称快速应用

## 注意事项
- 程序会自动处理图片格式转换
- 建议在处理大量图片前先测试小批量
- 导出前请确保有足够的磁盘空间
- 支持中文文件名和路径
- 每张图片的水印设置独立保存，切换图片时自动加载

## 贡献
欢迎提交Issue和Pull Request来改进这个项目！

---

**注意**：本项目为课程作业，主要功能已完整实现，部分高级功能为可选实现。